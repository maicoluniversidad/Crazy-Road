<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Fuel Rush ðŸš—ðŸ”¥</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at center, #111 0%, #000 100%);
      font-family: 'Press Start 2P', cursive, monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      color: #fff;
    }

    #gameCanvas {
      border: 6px solid #222;
      background: linear-gradient(to bottom, #2b2b2b 0%, #1c1c1c 100%);
      box-shadow: 0px 0px 40px rgba(0, 255, 128, 0.6),
                  inset 0 0 30px rgba(0, 0, 0, 0.8);
      border-radius: 12px;
    }

    #score {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0,0,0,0.6);
      padding: 10px 18px;
      border-radius: 8px;
      font-size: 16px;
      color: #00ffcc;
      text-shadow: 0 0 6px #00ffcc, 0 0 10px #00ffaa;
      border: 2px solid #00ffaa;
    }

    #gameOver {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(20, 20, 20, 0.9);
      padding: 40px 60px;
      border-radius: 10px;
      border: 2px solid #ff0066;
      text-align: center;
      font-size: 22px;
      display: none;
      color: #fff;
      text-shadow: 0 0 8px #ff0066;
      box-shadow: 0px 0px 25px rgba(255, 0, 102, 0.7);
    }

    #gameOver button {
      margin-top: 20px;
      padding: 12px 24px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(to right, #ff0066, #ff6600);
      color: white;
      cursor: pointer;
      font-family: 'Press Start 2P', cursive, monospace;
      text-shadow: 0 0 6px #000;
      transition: transform 0.2s ease;
    }

    #gameOver button:hover {
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  <div id="score">Puntos: 0</div>
  <div id="gameOver">
    <p>ðŸš§ GAME OVER ðŸš§</p>
    <button onclick="location.reload()">Reintentar</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const scoreDisplay = document.getElementById("score");
    const gameOverScreen = document.getElementById("gameOver");

    let score = 0;
    let gameOver = false;

    // Sprites en Base64
    const carSprite = new Image();
    carSprite.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAoCAYAAAD6f5qPAAAAwklEQVR4nO3YMQ6CMBBF0dsgXcCDxAhoZvhIkqjMAlLaPsuLOFfSsm2k9YQTBjzgr87HgVwAAAAAAAAAAwHsgAe3Sjvq9qWJOHtbE3LEc0f1ZmioIxbCHrYyZBxCjceELaztwZQOsG6Jpg4hNcsW4B3PEmKcm28hBEn13pAJxFV0+wJIkSPsuhHogNoUP5IbKfR6IHfsfeT3tCv9n6pQwMeyjQ+aqeb7DBRXy9b3U8hvw3tZz9acHgAC8aaET/5P7ryxAAAAAElFTkSuQmCC";

    const enemySprite = new Image();
    enemySprite.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAoCAYAAAD6f5qPAAAAp0lEQVR4nO3WMQ6CMBRE0dsgZcgD2aTqKJI4V9KrgAUUVTRD5Y9rYymfpY+LBgwA1P4PjvKFAAAAAAAAAACA5xsBS2hHXeHeJlmHR1pxzVf5qIqE0kVOGoVgEnqP4m2s3fUh4NaS5UOmRO3jD4GaSPcLd2yCBM4ilKwL0nhtvoLykS2cJ+Qec0ZzsyWwnz4e7EY9MzPf2m1L2z5f/EDfK1dHznb+1pToCEAAAAASUVORK5CYII=";

    const fuelSprite = new Image();
    fuelSprite.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAoCAYAAAD6f5qPAAAAhklEQVR4nO3VQQqAIBBF0aFUhffkEmXklg2XAM0S3a1XJIVlS2s3g3Z+AB7NAAAAAAAAAAD4FwgAaY+It1giUMF+4yoIVLxvTZwAzzOC+EjqvKXRB6wrxJkg4MbZDWhiCBlgUyLRMyyCwi1xmyLuh1mZ68e4X5XweF8bQWrf01mVKrscBgt4QQ/mcEnwXacgH/gAAAAASUVORK5CYII=";

    // Jugador
    const player = { x: 175, y: 500, width: 40, height: 60 };

    let enemies = [];
    let fuels = [];

    function drawPlayer() {
      ctx.drawImage(carSprite, player.x, player.y, player.width, player.height);
    }

    function drawEnemies() {
      enemies.forEach(e => ctx.drawImage(enemySprite, e.x, e.y, e.width, e.height));
    }

    function drawFuels() {
      fuels.forEach(f => ctx.drawImage(fuelSprite, f.x, f.y, f.width, f.height));
    }

    function update() {
      if (gameOver) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Mover enemigos
      enemies.forEach(e => e.y += 4);
      enemies = enemies.filter(e => e.y < canvas.height);

      // Mover fuels
      fuels.forEach(f => f.y += 3);
      fuels = fuels.filter(f => f.y < canvas.height);

      // Dibujar todo
      drawPlayer();
      drawEnemies();
      drawFuels();

      // Colisiones
      enemies.forEach(e => {
        if (player.x < e.x + e.width &&
            player.x + player.width > e.x &&
            player.y < e.y + e.height &&
            player.y + player.height > e.y) {
          gameOver = true;
          gameOverScreen.style.display = "block";
        }
      });

      fuels.forEach((f, i) => {
        if (player.x < f.x + f.width &&
            player.x + player.width > f.x &&
            player.y < f.y + f.height &&
            player.y + player.height > f.y) {
          fuels.splice(i, 1);
          score += 10;
          scoreDisplay.textContent = "Puntos: " + score;
        }
      });

      requestAnimationFrame(update);
    }

    function spawnEnemy() {
      if (!gameOver) {
        const x = Math.random() * (canvas.width - 40);
        enemies.push({ x, y: -60, width: 40, height: 60 });
        setTimeout(spawnEnemy, 1500);
      }
    }

    function spawnFuel() {
      if (!gameOver) {
        const x = Math.random() * (canvas.width - 30);
        fuels.push({ x, y: -40, width: 30, height: 40 });
        setTimeout(spawnFuel, 4000);
      }
    }

    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft" && player.x > 0) player.x -= 20;
      if (e.key === "ArrowRight" && player.x < canvas.width - player.width) player.x += 20;
    });

    // ðŸ”¹ Esperamos a que las imÃ¡genes carguen antes de arrancar el juego
    let imagesLoaded = 0;
    [carSprite, enemySprite, fuelSprite].forEach(img => {
      img.onload = () => {
        imagesLoaded++;
        if (imagesLoaded === 3) {
          spawnEnemy();
          spawnFuel();
          update();
        }
      };
    });
  </script>
</body>
</html>
